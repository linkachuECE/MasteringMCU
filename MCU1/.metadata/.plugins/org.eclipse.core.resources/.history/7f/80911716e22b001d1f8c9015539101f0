/*
 * stm32f407xx.h
 *
 *  Created on: Aug 31, 2022
 *      Author: egbra
 */

#ifndef INC_STM32F407XX_H_
#define INC_STM32F407XX_H_

#include <stdint.h>

#define __vo volatile

// **************** BASE ADDRESSES ****************** //

// MEMORY BASE ADDRESSES
#define FLASH_BASEADDR				0x08000000UL
#define SRAM1_BASEADDR				0x20000000UL
#define SRAM2_BASEADDR				0x2001C000UL
#define ROM_BASEADDR				0x1FFF0000UL
#define SRAM						SRAM1_BASEADDR

//PERIPHERAL BASE ADDRESSES
#define PERIPH_BASEADDR				0x40000000UL
#define APB1PERIPH_BASEADDR			PERIPH_BASEADDR
#define APB2PERIPH_BASEADDR			0x40010000UL
#define AHB1PERIPH_BASEADDR			0x40020000UL
#define AHB2PERIPH_BASEADDR			0x50000000UL

// AHB1 PERIPHERAL ADDRESSES
#define GPIOA_BASEADDR				(AHB1PERIPH_BASEADDR + 0x0000UL)
#define GPIOB_BASEADDR				(AHB1PERIPH_BASEADDR + 0x0400UL)
#define GPIOC_BASEADDR				(AHB1PERIPH_BASEADDR + 0x0800UL)
#define GPIOD_BASEADDR				(AHB1PERIPH_BASEADDR + 0x0C00UL)
#define GPIOE_BASEADDR				(AHB1PERIPH_BASEADDR + 0x1000UL)
#define GPIOF_BASEADDR				(AHB1PERIPH_BASEADDR + 0x1400UL)
#define GPIOG_BASEADDR				(AHB1PERIPH_BASEADDR + 0x1800UL)
#define GPIOH_BASEADDR				(AHB1PERIPH_BASEADDR + 0x1C00UL)
#define GPIOI_BASEADDR				(AHB1PERIPH_BASEADDR + 0x2000UL)

// APB1 PERIPHERAL ADDRESSES
#define I2C1_BASEADDR				(APB1PERIPH_BASEADDR + 0x5400UL)
#define I2C2_BASEADDR				(APB1PERIPH_BASEADDR + 0x5800UL)
#define I2C3_BASEADDR				(APB1PERIPH_BASEADDR + 0x5C00UL)

#define SPI2_BASEADDR				(APB1PERIPH_BASEADDR + 0x3800UL)
#define SPI3_BASEADDR				(APB1PERIPH_BASEADDR + 0x3C00UL)

#define USART2_BASEADDR				(APB1PERIPH_BASEADDR + 0x4400UL)
#define USART3_BASEADDR				(APB1PERIPH_BASEADDR + 0x4800UL)
#define UART4_BASEADDR				(APB1PERIPH_BASEADDR + 0x4C00UL)
#define UART5_BASEADDR				(APB1PERIPH_BASEADDR + 0x5000UL)

// APB2 PERIPHERAL ADDRESSES
#define SPI1_BASEADDR				(APB2PERIPH_BASEADDR + 0x3000UL)

#define USART1_BASEADDR				(APB2PERIPH_BASEADDR + 0x1000UL)
#define USART6_BASEADDR				(APB2PERIPH_BASEADDR + 0x1400UL)

#define EXTI_BASEADDR				(APB2PERIPH_BASEADDR + 0x3C00UL)

#define SYSCFG_BASEADDR				(APB2PERIPH_BASEADDR + 0x3800UL)


// **************** PERIHERAL REGISTER DEFINITION STRUCTURES ****************** //

// GPIO
typedef struct {
	__vo uint32_t MODER;			// Mode register
	__vo uint32_t OTYPER;			// Output type register
	__vo uint32_t OSPEEDR;			// Output speed register
	__vo uint32_t PUPDR;			// Pull-up/pull-down register
	__vo uint32_t IDR;				// Input data register
	__vo uint32_t ODR;				// Output data register
	__vo uint32_t BSRR;				// Bit set/reset register
	__vo uint32_t LCKR;				// Configuration lock register
	__vo uint32_t AFR[2];			// AFR[0] : GPIO alternate function low register, AFR[1] : GPIO alternate function high register
} GPIO_RegDef_t;

// I2C
typedef struct {
	__vo uint32_t CR1;				// Control register 1
	__vo uint32_t CR2;				// Control register 2
	__vo uint32_t OAR1;				// Own address register
	__vo uint32_t OAR2;				// Own address register 2
	__vo uint32_t DR;				// Data register
	__vo uint32_t SR1;				// Status register 1
	__vo uint32_t SR2;				// Status register 2
	__vo uint32_t CCR;				// Clock control register
	__vo uint32_t TRISE;			// TRISE register
	__vo uint32_t FLTR;				// FLTR register
} I2C_RegDef_t;


// SPI
typedef struct {
	__vo uint32_t CR1;				// Control register 1
	__vo uint32_t CR2;				// Control register 2
	__vo uint32_t SR;				// Status register
	__vo uint32_t DR;				// Data register
	__vo uint32_t CRCPR;			// CRC polynomial register
	__vo uint32_t RXCRCR;			// RX CRC register
	__vo uint32_t TXCRCR;			// TX CRC register
	__vo uint32_t I2SCFGR;			// I2S configuration register
	__vo uint32_t I2SPR;			// I2S pre-scaler register
} SPI_I2S_RegDef_t;


//************ PERIPHERAL DEFINITIONS ***************//

#define GPIOA		( (GPIO_RegDef_t*) GPIOA_BASEADDR )
#define GPIOB		( (GPIO_RegDef_t*) GPIOB_BASEADDR )
#define GPIOC		( (GPIO_RegDef_t*) GPIOC_BASEADDR )
#define GPIOD		( (GPIO_RegDef_t*) GPIOD_BASEADDR )
#define GPIOE		( (GPIO_RegDef_t*) GPIOE_BASEADDR )
#define GPIOF		( (GPIO_RegDef_t*) GPIOF_BASEADDR )
#define GPIOG		( (GPIO_RegDef_t*) GPIOG_BASEADDR )
#define GPIOH		( (GPIO_RegDef_t*) GPIOH_BASEADDR )
#define GPIOI		( (GPIO_RegDef_t*) GPIOI_BASEADDR )

#endif /* INC_STM32F407XX_H_ */
